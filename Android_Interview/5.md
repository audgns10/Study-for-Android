# 안드로이드의 메모리 관리 방식에 대해서 설명하시오

<br>

* Paging
  * 페이징은 가상 메모리와 물리 메모리를 고정된 영역으로 나누는 것을 의미합니다
  * ![](https://velog.velcdn.com/images/vov3616/post/65a8818f-951b-4ddf-a486-7d0cec969f2d/image.png)
  * 위의 그림과 같이 process4가 들어오기 위해서는 process1 혹은 3이 종료가 되어야지만 들어올 수 있습니다(총 메모리 공간은 충분하지만, 실제로 할당을 할 수 없는 문제를 external fragment(외부 단편화)라고 말합니다)
  * 이러한 문제를 해결하기 위해서는 프로세스를 최대한 위로 당겨주는 방법이 있습니다
  * ![](https://velog.velcdn.com/images/vov3616/post/ee9ae4e0-2ea2-49d9-b336-be0df50330ca/image.png)
  * 이러한 방식을 compaction이라고 하고, 임시공간에 프로세스를 저장하고 다시 빼오는 방법을 사용해야합니다
  * 하지만 이러한 방식은 하드디스크를 사용하기 때문에 상당히 느립니다
  * 그래서 Paging이라는 기법이 생겼습니다
  * ![](https://velog.velcdn.com/images/vov3616/post/a0357948-2b44-4486-aaf8-26971d231944/image.png)
  * 여기서 Paging이란 프로세스를 동일한 크기로 잘라서 배치하는 방법을 말합니다
  * 아까 전과는 달리 프로세스를 연속으로 배치하지 않아도 Paging Mapping을 통해서 실행할 수 있기 때문에 아래와 같은 그림이 나오게 됩니다
  * ![](https://velog.velcdn.com/images/vov3616/post/fc856570-a849-4ed4-b9a3-02cddafa0639/image.png)
  * 일정한 크기로 잘려진 단위를 가상메모리에서는 Page, 물리메모리에서는 Frame이라 합니다

* 페이지 아웃 ,페이지 폴트, 페이지 인
  * 현재 메모리를 Paging을 사용해서 효율적으로 프로세스를 관리를 하고 있다고 가정을 했을 경우에 메모리가 꽉차는 경우가 생길 수 있습니다
  * 꽉찬 메모리를 처리하기 위해서는 사용중인 페이지나 프레임을 어딘가에 담아두는 것 즉, 페이지 아웃이 필요합니다
  * ![](https://velog.velcdn.com/images/vov3616/post/f290fe57-1123-49cd-a659-41fb990ed307/image.png)
  * 위와 같이 날아간 페이지들은 스왑스페이스(하드디스크 같은 보조 저장장치)라는 곳에 저장이 됩니다
  * 페이지 아웃된 페이지에 대한 요청시, 페이지 폴트가 발생하고 페이지 인을 실행하여 다시 데이터를 가져오게 됩니다
  * 이러한 방식을 통해서 실제 메모리를 조금 더 넓게 사용할 수 있습니다

* 안드로이드에서는 스왑이 존재하지 않는다?
  * 그렇다 안드로이드에서는 스왑이 존재하지 않는다
  * 내구성과 에너지와 같은 단점이 존재하기 때문에 플래시 메모리에 적합하지 않아서 스왑스페이스로는 적절하지 않습니다

* Z(zip)ram 을 만들어서 압축해서 넣어놓자
  * 안드로이드에서는 Zram이라는 파티션이 존재합니다
  * 페이지 아웃이 일어날때, Ram에서는 ZRam으로 보내게되고, 압축을 하게됩니다
  * 페이지인을 통해 복사하여 가져올때는 압축이 풀린 상태로 가져오게 됩니다

<br>

> 안드로이드는 메모리를 관리하기 위해서 Paging이라는 기법을 사용합니다
> 페이징은 가상 메모리와 물리 메모리를 고정된 영역으로 나누는 것을 의미합니다
> 이를, 통해 메모리 공간은 충분하지만 실제로 할당을 할 수 없는 문제인 외부 단편화 문제를 해결할 수 있습니다
> 가상메모리에서는 페이지, 물리메모리에서는 프레임이라고 합니다
> 메모리가 꽉찼을 경우에는 사용중인 페이지나 프레임을 담아두는 페이지 아웃이 발생하게 되고, 페이지 폴트가 발생하면 페이지 인을 통해서 다시 메모리로 가져오게 됩니다
> 하지만 안드로이드에서는 내구성과 에너지와 같은 문제로 인해서 플래시 메모리에서 스왑 기능을 사용하지 않습니다
> 대신 안드로이드에서는 Zram을 사용해서 메모리를 압축을 합니다
> 페이지 아웃 시 Zram으로 데이터를 보내 압축하고, 페이지 인 시 압축을 해제하여 데이터를 복원합니다
> 이러한 방법들을 사용해서 안드로이드는 메모리를 효율적으로 관리하고 성능을 유지시킬 수 있습니다